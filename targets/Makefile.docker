DOCKER_TAG := latest

.PHONY: all
all: build

.PHONY: clean
clean:
	echo "done"

.PHONY: test
test:
	echo "done"

# GitHub
.PHONY: auth-github
auth-github:
	$(MAKE) docker-auth DOCKER_REGISTRY=docker.pkg.github.com

.PHONY: docker-tag-github
docker-tag-github:
	$(MAKE) docker-tag DOCKER_REGISTRY=docker.pkg.github.com

.PHONY: docker-push-github
docker-push-github:
	$(MAKE) docker-push DOCKER_REGISTRY=docker.pkg.github.com

# Docker Hub
.PHONY: docker-auth-hub
docker-auth-hub:
	$(MAKE) docker-auth DOCKER_REGISTRY=registry.hub.docker.com

.PHONY: docker-tag-hub
docker-tag-hub:
	$(MAKE) docker-tag DOCKER_REGISTRY=registry.hub.docker.com

.PHONY: docker-push-hub
docker-push-hub:
	$(MAKE) docker-push DOCKER_REGISTRY=registry.hub.docker.com


# Raw
.PHONY: docker-tag
docker-tag:
	docker tag ${DOCKER_IMAGE} ${DOCKER_REGISTRY}/${DOCKER_IMAGE}:${DOCKER_TAG}

.PHONY: docker-push
docker-push:
	docker push ${DOCKER_REGISTRY}/${DOCKER_IMAGE}:${DOCKER_TAG}

.PHONY: docker-auth
auth-github:
	echo "${DOCKER_TOKEN}" | docker login -u ${DOCKER_USER} --password-stdin ${DOCKER_REGISTRY}
